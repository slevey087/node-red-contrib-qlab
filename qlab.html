<script type="text/javascript">
    RED.nodes.registerType('qlab in',{
        category: 'input',
        color: '#5a5499',
        defaults: {
            port: {value:53002,
                   required:true,
                   validate: function(v) {return (Number(v) > 0) && (Number(v) < 65536);} },
            passcode: {value:"",
                       validate: function(v) { return (v.match(/^\d\d\d\d$/) || v === ""); } },
            name: {value:""}
        },
        inputs:0,
        outputs:1,
        icon: "",
        label: function() {
            return this.name||"qlab in";
        }
    });
</script>
<script type="text/x-red" data-template-name="qlab in">
    <div class="form-row">
        <label for="node-input-port"><i class="fa fa-dot-circle-o"></i> Listen port:</label>
        <input type="text" id="node-input-port" style="width:80px;" placeholder="port">
		&nbsp; &nbsp; &nbsp; 
        <label for="node-input-passcode"><i class="fa fa-lock"></i> Passcode</label>
        <input type="text" id="node-input-passcode" style="width:80px;" placeholder="xxxx">
    </div> 
    <div class="form-row">    
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
</script>
<script type="text/x-red" data-help-name="qlab in">
    <p>Communicate with Qlab via OSC.</p>
</script>
<script type="text/javascript">
    RED.nodes.registerType('qlab out',{
        category: 'output',
        color: '#5a5499',
        defaults: {
            qlab: {value:"",
                  type:"qlab config"},
            name: {value:""}
        },
        inputs:1,
        outputs:0,
        icon: "",
        label: function() {
            return this.name||"qlab out";
        }
    });
</script>
<script type="text/x-red" data-template-name="qlab out">
    <div class="form-row">
        <label for="node-input-qlab"><i class="icon-tag"></i> Qlab</label>
        <input type="text" id="node-input-qlab" placeholder="">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
</script>
<script type="text/x-red" data-help-name="qlab out">
    <p>Communicate with Qlab via OSC.</p>
</script>
<script type="text/javascript">
    RED.nodes.registerType('qlab query',{
        category: 'function',
        color: '#5a5499',
        defaults: {
            qlab: {value:"",
                  type:"qlab config"},            
            name: {value:""}
        },
        inputs:0,
        outputs:1,
        icon: "",
        label: function() {
            return this.name||"qlab query";
        }
    });
</script>
<script type="text/x-red" data-template-name="qlab query">
    <div class="form-row">
        <label for="node-input-qlab"><i class="icon-tag"></i> Qlab</label>
        <input type="text" id="node-input-qlab" placeholder="">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
</script>
<script type="text/x-red" data-help-name="qlab query">
    <p>Communicate with Qlab via OSC.</p>
</script>
<script type="text/javascript">
     RED.nodes.registerType('qlab config',{
         category: 'config',
         color: '#5a5499',
         defaults: {
            ipAddress: {value:"localhost",
                        required:true,
                        validate: function(v) {} },
            protocol: {value:"udp",
                      required:true},                    
            passcode: {value:""},             
            name: {value:""}
         },
         label: function() {
             return this.name||"qlab config";
         }
     });
 </script>
 
 <script type="text/x-red" data-template-name="qlab config">
      <div class="form-row">
        <label for="node-config-input-name"><i class="icon-tag"></i> Nickname:</label>
        <input type="text" id="node-config-input-name" placeholder="Name">
     </div>
     <div class="form-row">
        <label for="node-config-input-ipAddress"><i class="icon-tag"></i> IP Address</label>
        <input type="text" id="node-config-input-ipAddress" placeholder="x.x.x.x or localhost">
     </div>
     <div class="form-row">
        <label for="node-config-input-protocol"><i class="icon-tag"></i> Protocol</label>
        <select id="node-config-input-protocol" style="width:80px;">
            <option value="udp">UDP</option>
            <option value="tcp">TCP</option>
        </select>
        <label for="node-config-input-passcode"><i class="icon-tag"></i> Passcode</label>
        <input type="text" id="node-config-input-passcode" style="width:80px;" placeholder="xxxx">
     </div>
     <div class="form-row">
        <label for="node-config-input-workspaceId"><i class="icon-tag"></i> Workspace ID: </label>
        <input type="text" id="node-config-input-workspaceId" placeholder="Qlab workspace ID">
     </div>
 </script>
 
 <script type="text/x-red" data-help-name="qlab config">
     <p>Communicate with Qlab via OSC.</p>
 </script>
